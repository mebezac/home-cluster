---
defaultPodOptions:
  securityContext:
    runAsUser: 568
    runAsGroup: 568
    fsGroup: 568
    fsGroupChangePolicy: "OnRootMismatch"

controllers:
  main:
    annotations:
      secret.reloader.stakater.com/reload: garage-secret
    containers:
      main:
        image:
          repository: khairul169/garage-webui
          tag: 1.1.0@sha256:17c793551873155065bf9a022dabcde874de808a1f26e648d4b82e168806439c
        env:
          API_BASE_URL: "http://garage-admin.garage.svc.cluster.local:3903"
          S3_ENDPOINT_URL: "http://garage-s3.garage.svc.cluster.local:3900"
        envFrom:
          - secretRef:
              name: garage-secret
        resources:
          requests:
            cpu: 50m
            memory: 64Mi
          limits:
            memory: 256Mi

service:
  main:
    controller: main
    ports:
      http:
        port: 3909

ingress:
  main:
    enabled: true
    className: internal
    hosts:
      - host: garage-console.laboratory.casa
        paths:
          - path: /
            pathType: ImplementationSpecific
            service:
              identifier: main
              port: http

persistence:
  config:
    type: secret
    name: garage-secret
    globalMounts:
      - path: /etc/garage.toml
        subPath: garage.toml
        readOnly: true
