frontend:
    image:
        repository: registry.skysolutions.fi/docker.io/1337kavin/piped-frontend
        tag: latest@sha256:c5b6f70ebc494d20e7a8b00a39d8d25a238b7a5b5956e526d99859b0a9c9935d
        pullPolicy: IfNotPresent
    env:
        BACKEND_HOSTNAME: piped-api.laboratory.casa
backend:
    podAnnotations:
        configmap.reloader.stakater.com/reload: piped-backend-config
    initContainers:
        01-init-db:
            image: ghcr.io/home-operations/postgres-init:17.5
            envFrom:
                - secretRef:
                    name: piped-db-secret
    additionalContainers:
        warp:
            image: registry.skysolutions.fi/library/warp-sock5:31052025
            securityContext:
                capabilities:
                    add:
                        - NET_ADMIN
    image:
        repository: registry.skysolutions.fi/docker.io/1337kavin/piped
        tag: latest@sha256:d8e2b08fc164b4d2dce4c62b62d273dfc75918e1b91b4c92c38dafe2b647bf11
        pullPolicy: IfNotPresent
    config:
        PORT: 8080
        HTTP_WORKERS: 4
        PROXY_PART: https://piped-ytproxy.laboratory.casa
        REQWEST_PROXY: socks5://127.0.0.1:40000
        database:
            connection_url: jdbc:postgresql://postgres-17-cluster-rw.database.svc.cluster.local/piped
            driver_class: org.postgresql.Driver
            dialect: org.hibernate.dialect.PostgreSQLDialect
            username: piped
            password: ENC[AES256_GCM,data:l75r+KGhChgRR4Q97EM+TiWbHaqY3V8vdVg=,iv:rmeZAEd9A9A6PJak4NlVHrYltvctiIc8kzRu3cinkH8=,tag:BbAy35nI5V+fgDDLKU/2EA==,type:str]
ytproxy:
    enabled: true
    image:
        repository: registry.skysolutions.fi/docker.io/1337kavin/piped-proxy
        tag: latest@sha256:c6dacdabdcf7cb8d6abfaa70480930d87575d24b5827fa2c62918aab9dc3ced8
        pullPolicy: IfNotPresent
    env:
        RUST_BACKTRACE: 1
        PROXY: socks5://127.0.0.1:40000
    additionalContainers:
        warp:
            image: registry.skysolutions.fi/library/warp-sock5:31052025
            securityContext:
                capabilities:
                    add:
                        - NET_ADMIN
ingress:
    main:
        enabled: true
        ingressClassName: internal
        hosts:
            - host: piped.laboratory.casa
              paths:
                - path: /
    backend:
        enabled: true
        ingressClassName: internal
        hosts:
            - host: piped-api.laboratory.casa
              paths:
                - path: /
    ytproxy:
        enabled: true
        ingressClassName: internal
        hosts:
            - host: piped-ytproxy.laboratory.casa
              paths:
                - path: /
postgresql:
    enabled: false
sops:
    age:
        - recipient: age1j7x3jkw82w02taqj8dmqplae07fxcrup2enejnta9z2v82fzsakqd4ka6p
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBmM1NmbzIyZGRKUUhOeWFr
            YTdqL2o0OGZNejdqNnR5clluOG1xRmljd1ZJCnZiUERtRmRKblByV3Byck5KeEhM
            UlZBMllzelF2R2dFMXlzU3JCNzRhTlEKLS0tIDhESVh3QXJ1WHJkY3JGS2xYTXhs
            aUhWbWViT1dtcXhDUW9EdXNTM1o0bVkKN52SmakHpuyebyLBHC/QtgVNmKI7nFQg
            DRW+LPkwMPanZlRB6fQdR+N0eJDiMa46A79hSC7ttWSKKJ59fwpXbA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-06-25T18:46:18Z"
    mac: ENC[AES256_GCM,data:4jAIZ5TYU0/ATbYHSK348bvUY29Hn7zPLjaHGQSbxpsLp6ZjyptA+nqmEw+ljBrKI3HxHBvy/5S92VrVDBnXTuVE/AJsxVKRC3wD3+bzSikn+BZbS9FB6dtm/MnQGAjk83JK4WNfNqzXWp0gGaUv+pgNK2sTvu4CLlMPiOOUNpw=,iv:EnfPF7Q71eMK5kRlRMV/+LtBUcxSYlWaXqcA4Vsjd7Y=,tag:8Q6MZkVwrh8VxXuOhuljPQ==,type:str]
    encrypted_regex: (password)
    mac_only_encrypted: true
    version: 3.10.2
